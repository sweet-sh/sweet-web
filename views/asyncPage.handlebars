<div id="homeBody" class="row justify-content-center">
  <div class="col-lg-8">
    <div class="container commentsList" id="postContainer">
      <article class="comment commentContainer" data-post-id="n/a">
        <div class="row">
          <div class="col commentContent">
            <div class="mb-3 d-flex">
              <img alt="Profile image of sweet_mainframe_1100" class="postAuthorImage" src="/images/term_small_thinking.gif">
              <div class="post-header">
                <div class="post-header-row-1">
                  <div class="author-username">
                    <strong><a class="authorLink" href="/">sweet_mainframe_1100</a></strong>
                  </div>

                </div>
                <div class="post-header-row-2">
                  <div class="post-timestamp-privacy">
                    <small class="commentTimestamp text-muted">1s ago</small><small class="text-muted"> Â· <i class="fas fa-eye"></i></small>
                  </div>
                </div>
              </div>
            </div>
            {{#each getUrl}}
            <div class="post-content async-load-{{@index}}">
              <img src="/images/loading.gif" style="display: block; margin: 0 auto;max-width:100%">
            </div>
            {{#unless @last}}<hr style="margin:1em 0;">{{/unless}}
            {{/each}}
          </div>
        </div>
        <div class="row commentMetadata">
          <div class="col" style="display:flex;justify-content:space-between;">
            <div id="generalTools">
              <button type="button" class="button openReplyBox post-action-button" disabled>
                <i class="far fa-comment"></i>
              </button>
              <a class="button post-action-button" href="">
                <i class="fas fa-link"></i>
              </a>
            </div>
            <div id="authorTools">
              <button type="button" class="button mutePost post-action-button" data-post-id="n/a" disabled>
                <i class="far fa-bell"></i>
              </button>
            </div>
          </div>
        </div>
      </article>
    </div>
  </div>
</div>
<script>
  var completedGets = 0;
  {{#each getUrl}}
  $.get("{{this}}").then(response=>{
    completedGets++;
    $('.post-content.async-load-{{@index}}').html(response);
    if(completedGets=={{../getUrl.length}}){
      $('.postAuthorImage').attr('src','/images/term_small.png');
    }
  })
  {{/each}}
</script>
